CREATE DATABASE db_production;

USE db_production;

CREATE TABLE tbl_function (
	id INT AUTO_INCREMENT,
    _desc VARCHAR(15) NOT NULL,
    CONSTRAINT tbl_function_pk PRIMARY KEY (id)
);

CREATE TABLE tbl_operator (
	id INT AUTO_INCREMENT,
    id_function INT NOT NULL,
    cpf CHAR(11) NOT NULL,
    _name VARCHAR(50) NOT NULL,
    CONSTRAINT tbl_operator_pk PRIMARY KEY (id),
    CONSTRAINT tbl_operator_id_function_fk FOREIGN KEY (id_function)
    REFERENCES tbl_function (id),
    CONSTRAINT tbl_operator_un UNIQUE (cpf)
);

CREATE TABLE tbl_machine (
	id INT AUTO_INCREMENT,
    _desc VARCHAR(20) NOT NULL,
    CONSTRAINT tbl_machine_pk PRIMARY KEY (id)
);

CREATE TABLE tbl_part (
	id INT AUTO_INCREMENT,
    _desc VARCHAR(35) NOT NULL,
    height NUMERIC(7,3) NOT NULL,
    width NUMERIC(7,3) NOT NULL,
    depth NUMERIC(7,3) NOT NULL,
    _weight NUMERIC(7,3) NOT NULL,
    media_production INT NOT NULL,
    CONSTRAINT tbl_part_pk PRIMARY KEY (id)
);

CREATE TABLE tbl_production (
	id INT AUTO_INCREMENT,
    id_operator INT,
    id_machine INT,
    id_part INT,
    dt_begin DATETIME NOT NULL,
    dt_final DATETIME NULL,
    qtd_part INT,	
    CONSTRAINT tbl_production_pk PRIMARY KEY (id),
    CONSTRAINT tbl_production_id_operator_fk FOREIGN KEY (id_operator)
    REFERENCES tbl_operator (id),
	CONSTRAINT tbl_production_id_machine_fk FOREIGN KEY (id_machine)
    REFERENCES tbl_machine (id),
    CONSTRAINT tbl_production_id_part_fk FOREIGN KEY (id_part)
    REFERENCES tbl_part (id)
);

# ------------------------------------------------------------------------------------------------
INSERT INTO tbl_function (_desc) VALUES ('FERRAMENTEIRO 1'), ('FERRAMENTEIRO 2'), ('FERRAMENTEIRO 3'),
('TORNEIRO 1'), ('TORNEIRO 2'), ('TORNEIRO 3');

# ------------------------------------------------------------------------------------------------

INSERT INTO tbl_machine (_desc) VALUES ('MAQ 1'), ('MAQ 2'), ('MAQ 3'), ('CNC 1'), ('CNC 2'), ('CNC 3');

# ------------------------------------------------------------------------------------------------

INSERT INTO tbl_operator (_name, cpf, id_function) VALUES ('ROMARIO','64507019745',4), ('BEBETO','29644396632',5), ('ZAGALO','29478804013',2), ('MARTA','31428034380',2), ('MIRANDINHA','19112327936',3), ('NETO','51781766730',5), ('VIOLA','31851415367',6), ('RONALDO','21822987354',2), ('ZE MARIA','83390130176',1), ('BIRO BIRO','27290913845',3), ('GARRINCHA','55809398285',5), ('NEYMAR','94037173733',6);

# ------------------------------------------------------------------------------------------------

INSERT INTO tbl_part (_desc, height, width, depth, _weight, media_production) VALUES ('PECA 1',12.358,12.968,8.987,5.01,41), ('PECA 2',13.331,8.994,11.182,6.66,42), ('PECA 3',14.682,9.9,13.688,2.4,35), ('PECA 4',11.869,14.543,12.262,3.88,37), ('PECA 5',7.666,4.892,13.188,9.83,41), ('PECA 6',5.646,5.344,4.963,6.64,55), ('PECA 7',7.038,13.332,11.667,7.02,47), ('PECA 8',11.433,7.34,8.865,9.82,44), ('PECA 9',10.22,11.595,12.285,9.45,42), ('PECA 10',7.912,5.826,11.431,1.93,33), ('PECA 11',14.045,9.649,7.433,1.22,57), ('PECA 12',4.204,7.481,5.297,7.99,32), ('PECA 13',14.518,11.948,13.141,8.2,38), ('PECA 14',7.391,12.177,5.704,6.71,41), ('PECA 15',7.188,11.458,6.06,9.89,53), ('PECA 16',11.018,12.626,5.594,7.11,43), ('PECA 17',12.614,12.23,9.337,2.11,56), ('PECA 18',13.281,13.882,12.318,4.82,58), ('PECA 19',5.055,11.017,7.324,9.47,31), ('PECA 20',6.883,8.943,9.089,5.34,51), ('PECA 21',7.845,6.239,13.041,1.91,38), ('PECA 22',8.295,14.78,6.594,6.36,42), ('PECA 23',9.182,5.681,13.016,2.02,48), ('PECA 24',10.938,9.113,8.127,9.89,37), ('PECA 25',8.904,9.033,9.751,6.61,52), ('PECA 26',7.879,10.1,11.043,4.95,37), ('PECA 27',10.477,8.079,11.667,7.31,50), ('PECA 28',12.034,10.931,7.087,4.81,34), ('PECA 29',14.154,5.637,6.318,5.12,31), ('PECA 30',8.935,7.881,12.928,1.06,42), ('PECA 31',9.621,14.191,12.661,8.15,53), ('PECA 32',7.191,11.707,6.469,8.7,32), ('PECA 33',10.84,9.176,11.819,8.32,30), ('PECA 34',4.499,14.278,13.599,8.74,55), ('PECA 35',13.082,4.621,11.672,2.04,54), ('PECA 36',11.253,7.493,6.216,1.79,33), ('PECA 37',13.43,9.317,14.037,1.5,41), ('PECA 38',11.693,7.432,7.528,1.77,49), ('PECA 39',14.176,9.766,14.476,6.22,55), ('PECA 40',12.524,8.684,10.633,1.39,40), ('PECA 41',14.903,14.279,8.37,5.3,35), ('PECA 42',5.68,11.246,14.416,3.63,43), ('PECA 43',10.833,8.37,8.98,5.15,45), ('PECA 44',4.313,5.088,9.294,1.05,54), ('PECA 45',12.414,7.119,8.5,6.28,44), ('PECA 46',7.647,14.194,8.547,2.62,35), ('PECA 47',7.902,4.077,13.505,9.63,60), ('PECA 48',11.399,14.383,11.772,4.01,45), ('PECA 49',5.478,5.963,6.602,9.82,35), ('PECA 50',7.072,10.335,8.572,2.96,55);

# ------------------------------------------------------------------------------------------------

INSERT INTO tbl_production(id_operator, id_machine, id_part, dt_begin, dt_final, qtd_part) VALUES (9,6,29,'2023-09-27 10:36','2023-09-27 11:33',43), (8,6,44,'2023-10-06 11:15','2023-10-06 12:32',38), (11,3,37,'2023-09-04 13:17','2023-09-04 14:22',57), (9,1,36,'2023-09-17 09:47','2023-09-17 10:44',55), (11,6,26,'2023-08-26 10:59','2023-08-26 11:51',61), (9,1,36,'2023-10-02 11:06','2023-10-02 12:02',47), (10,3,38,'2023-08-30 08:34','2023-08-30 09:52',36), (1,4,20,'2023-08-12 13:35','2023-08-12 14:36',46), (6,5,22,'2023-08-02 08:33','2023-08-02 09:25',64), (1,3,35,'2023-09-05 09:49','2023-09-05 11:03',52), (3,4,12,'2023-10-06 09:33','2023-10-06 10:26',57), (11,6,30,'2023-10-04 08:23','2023-10-04 09:34',53), (12,2,31,'2023-09-16 11:54','2023-09-16 13:07',63), (7,1,35,'2023-08-27 09:30','2023-08-27 10:48',63), (9,6,47,'2023-08-18 09:25','2023-08-18 10:37',62), (12,2,5,'2023-09-26 12:33','2023-09-26 13:46',38), (6,2,7,'2023-08-01 11:25','2023-08-01 12:17',49), (9,5,27,'2023-09-30 10:44','2023-09-30 12:00',53), (9,2,6,'2023-08-09 10:52','2023-08-09 11:44',60), (10,5,19,'2023-09-21 11:34','2023-09-21 12:48',67), (2,6,49,'2023-08-20 08:19','2023-08-20 09:30',61), (8,2,43,'2023-10-06 13:15','2023-10-06 14:16',48), (4,5,40,'2023-08-02 09:23','2023-08-02 10:35',48), (10,1,45,'2023-10-05 09:33','2023-10-05 10:50',47), (5,2,5,'2023-09-17 12:45','2023-09-17 14:01',57), (7,6,26,'2023-10-03 09:55','2023-10-03 11:09',41), (5,2,31,'2023-08-02 11:44','2023-08-02 12:49',45), (6,6,41,'2023-08-22 11:33','2023-08-22 12:32',61), (7,3,19,'2023-08-13 08:39','2023-08-13 09:53',46), (9,4,19,'2023-09-08 09:17','2023-09-08 10:17',55), (9,3,35,'2023-08-08 11:16','2023-08-08 12:14',66), (11,3,2,'2023-09-11 09:35','2023-09-11 10:28',67), (12,2,21,'2023-08-01 08:23','2023-08-01 09:30',37), (3,4,17,'2023-09-27 08:19','2023-09-27 09:24',66), (6,1,33,'2023-08-07 13:49','2023-08-07 15:03',61), (3,2,34,'2023-09-21 10:11','2023-09-21 11:08',42), (12,6,14,'2023-09-25 12:31','2023-09-25 13:31',57), (11,2,24,'2023-08-21 12:46','2023-08-21 14:02',64), (9,5,4,'2023-10-02 12:06','2023-10-02 13:16',50), (11,2,39,'2023-08-16 12:44','2023-08-16 13:59',42), (10,4,13,'2023-08-28 08:44','2023-08-28 09:43',66), (5,2,6,'2023-08-18 13:43','2023-08-18 14:49',65), (12,4,37,'2023-08-29 10:09','2023-08-29 11:09',51), (3,2,41,'2023-10-07 10:58','2023-10-07 11:57',36), (10,2,16,'2023-10-01 13:48','2023-10-01 14:51',61), (11,4,15,'2023-09-17 11:33','2023-09-17 12:36',66), (7,2,27,'2023-08-28 10:27','2023-08-28 11:36',65), (5,1,3,'2023-08-16 10:52','2023-08-16 11:51',62), (6,2,49,'2023-09-09 10:43','2023-09-09 11:36',59), (8,6,50,'2023-09-25 10:45','2023-09-25 11:44',66), (10,5,30,'2023-09-20 10:04','2023-09-20 11:18',41), (3,3,38,'2023-09-15 12:27','2023-09-15 13:27',55), (2,2,41,'2023-09-06 08:58','2023-09-06 10:03',63), (8,3,40,'2023-09-24 12:46','2023-09-24 14:04',39), (6,3,19,'2023-09-08 09:26','2023-09-08 10:31',64), (12,4,11,'2023-09-15 10:01','2023-09-15 10:55',49), (11,4,4,'2023-09-24 09:08','2023-09-24 10:22',61), (5,2,48,'2023-08-18 09:44','2023-08-18 10:40',59), (7,4,23,'2023-10-07 08:51','2023-10-07 09:55',51), (1,6,46,'2023-09-21 09:37','2023-09-21 10:39',42), (9,3,43,'2023-09-15 12:55','2023-09-15 13:52',65), (2,1,18,'2023-08-16 10:31','2023-08-16 11:34',35), (8,5,35,'2023-08-05 08:56','2023-08-05 10:12',51), (8,4,49,'2023-08-03 09:30','2023-08-03 10:28',54), (10,3,38,'2023-08-15 11:38','2023-08-15 12:54',59), (11,6,22,'2023-09-29 10:32','2023-09-29 11:33',58), (3,4,3,'2023-08-08 11:13','2023-08-08 12:08',52), (12,6,41,'2023-09-27 13:35','2023-09-27 14:41',57), (3,4,6,'2023-09-22 09:27','2023-09-22 10:24',49), (7,3,40,'2023-10-03 09:00','2023-10-03 09:59',59), (7,2,14,'2023-09-12 08:17','2023-09-12 09:16',39), (10,5,29,'2023-08-13 12:21','2023-08-13 13:27',54), (8,2,34,'2023-09-22 11:00','2023-09-22 11:58',38), (4,6,17,'2023-09-17 12:38','2023-09-17 13:52',45), (10,3,16,'2023-10-08 12:09','2023-10-08 13:25',49), (10,2,41,'2023-09-05 12:30','2023-09-05 13:26',54), (10,1,13,'2023-08-16 12:45','2023-08-16 13:52',55), (5,1,8,'2023-09-02 09:40','2023-09-02 10:57',67), (8,1,41,'2023-09-21 13:00','2023-09-21 14:07',61), (9,2,15,'2023-08-25 10:12','2023-08-25 11:14',56), (5,5,48,'2023-09-09 08:57','2023-09-09 10:05',50), (3,1,22,'2023-10-04 09:52','2023-10-04 10:53',47), (6,6,46,'2023-08-17 10:44','2023-08-17 11:54',38), (5,6,23,'2023-09-30 12:49','2023-09-30 14:06',40), (6,6,33,'2023-09-04 09:17','2023-09-04 10:29',66), (3,1,26,'2023-08-13 09:42','2023-08-13 10:35',51), (10,2,44,'2023-10-01 12:01','2023-10-01 12:56',41), (9,5,42,'2023-08-14 10:51','2023-08-14 11:57',49), (6,4,27,'2023-08-23 13:38','2023-08-23 14:50',50), (10,2,12,'2023-09-21 09:34','2023-09-21 10:36',66), (3,1,35,'2023-08-01 09:32','2023-08-01 10:27',61), (11,3,22,'2023-08-16 13:44','2023-08-16 14:49',43), (12,4,20,'2023-09-01 11:46','2023-09-01 12:55',46), (9,2,30,'2023-08-25 09:46','2023-08-25 10:38',51), (4,1,8,'2023-08-01 12:08','2023-08-01 13:12',41), (10,5,43,'2023-09-08 10:04','2023-09-08 11:07',35), (2,3,8,'2023-10-03 10:14','2023-10-03 11:22',54), (12,5,38,'2023-09-01 08:18','2023-09-01 09:11',56), (12,1,45,'2023-08-31 12:46','2023-08-31 13:44',51), (9,3,39,'2023-09-07 12:53','2023-09-07 13:45',47), (2,6,38,'2023-09-20 13:16','2023-09-20 14:23',46), (12,4,9,'2023-08-29 13:43','2023-08-29 14:56',58), (1,6,44,'2023-09-27 13:34','2023-09-27 14:49',60), (6,2,42,'2023-10-05 13:26','2023-10-05 14:40',61), (10,4,21,'2023-10-01 09:08','2023-10-01 10:23',64), (9,6,42,'2023-09-01 11:19','2023-09-01 12:28',44), (9,2,39,'2023-09-14 10:38','2023-09-14 11:34',48), (3,1,25,'2023-09-15 09:45','2023-09-15 10:56',53), (5,1,44,'2023-08-20 11:43','2023-08-20 12:53',59), (4,6,46,'2023-09-26 12:59','2023-09-26 14:06',42), (1,2,13,'2023-09-28 10:57','2023-09-28 12:11',39), (8,1,1,'2023-08-05 11:32','2023-08-05 12:33',65), (6,2,8,'2023-09-22 12:14','2023-09-22 13:22',46), (12,3,7,'2023-09-09 12:55','2023-09-09 13:58',52), (10,5,41,'2023-08-26 08:46','2023-08-26 09:59',53), (6,5,36,'2023-08-14 08:49','2023-08-14 09:59',53), (2,6,32,'2023-10-01 11:53','2023-10-01 12:56',36), (1,4,29,'2023-09-21 10:12','2023-09-21 11:28',62), (8,2,36,'2023-08-22 10:01','2023-08-22 11:00',64), (4,6,9,'2023-09-03 09:57','2023-09-03 11:09',65), (1,2,41,'2023-08-24 13:28','2023-08-24 14:38',44), (11,6,40,'2023-09-15 10:58','2023-09-15 12:02',49), (3,4,22,'2023-08-07 11:31','2023-08-07 12:39',58), (6,2,45,'2023-09-11 09:21','2023-09-11 10:17',51), (1,1,34,'2023-08-29 13:44','2023-08-29 14:52',57), (12,3,34,'2023-09-09 08:23','2023-09-09 09:18',40), (11,6,1,'2023-09-25 08:25','2023-09-25 09:21',35), (1,5,1,'2023-08-28 09:45','2023-08-28 10:57',46), (4,2,44,'2023-09-21 13:42','2023-09-21 14:58',54), (7,2,5,'2023-08-20 11:01','2023-08-20 12:05',49), (11,4,2,'2023-08-08 13:45','2023-08-08 14:38',51), (7,1,35,'2023-08-20 13:03','2023-08-20 14:14',49), (11,4,16,'2023-08-18 12:24','2023-08-18 13:28',48), (1,6,19,'2023-08-17 09:55','2023-08-17 10:58',64), (12,6,6,'2023-10-08 13:00','2023-10-08 13:59',60), (2,1,29,'2023-09-15 13:08','2023-09-15 14:25',66), (8,4,15,'2023-10-06 11:32','2023-10-06 12:48',37), (2,5,18,'2023-09-10 09:32','2023-09-10 10:34',62), (10,3,41,'2023-10-04 10:24','2023-10-04 11:42',61), (2,4,13,'2023-08-25 11:21','2023-08-25 12:38',65), (1,4,35,'2023-08-24 13:13','2023-08-24 14:17',62), (8,4,14,'2023-08-01 13:06','2023-08-01 13:58',56), (1,1,36,'2023-08-29 13:39','2023-08-29 14:44',62), (11,1,32,'2023-09-12 13:41','2023-09-12 14:53',44), (2,5,41,'2023-08-05 11:49','2023-08-05 13:05',48), (2,4,1,'2023-09-10 11:51','2023-09-10 13:02',43), (7,2,43,'2023-09-28 08:21','2023-09-28 09:35',65), (11,2,44,'2023-09-25 09:23','2023-09-25 10:25',37), (9,2,28,'2023-08-12 09:05','2023-08-12 10:21',44), (10,3,2,'2023-08-22 11:05','2023-08-22 12:10',47), (9,3,23,'2023-09-18 13:29','2023-09-18 14:45',53), (4,3,35,'2023-08-30 09:16','2023-08-30 10:16',67), (10,6,36,'2023-08-26 08:24','2023-08-26 09:38',66), (1,5,7,'2023-10-02 09:36','2023-10-02 10:42',62), (7,3,19,'2023-08-31 11:52','2023-08-31 13:05',47), (5,4,4,'2023-09-12 12:25','2023-09-12 13:30',61), (9,6,50,'2023-08-16 09:21','2023-08-16 10:29',57), (2,4,28,'2023-08-27 08:25','2023-08-27 09:29',39), (4,2,14,'2023-09-17 12:16','2023-09-17 13:26',47), (8,5,15,'2023-08-29 08:42','2023-08-29 09:54',49), (1,6,16,'2023-08-03 08:26','2023-08-03 09:31',41), (8,5,10,'2023-09-25 12:31','2023-09-25 13:39',35), (6,3,35,'2023-09-02 12:53','2023-09-02 14:07',44), (8,5,1,'2023-09-14 09:39','2023-09-14 10:46',53), (9,6,22,'2023-08-20 10:49','2023-08-20 11:56',42), (8,3,50,'2023-08-24 11:13','2023-08-24 12:10',36), (12,4,40,'2023-08-05 12:59','2023-08-05 14:16',53), (3,6,46,'2023-09-08 12:18','2023-09-08 13:32',65), (2,5,48,'2023-09-10 11:39','2023-09-10 12:44',35), (9,1,4,'2023-08-14 11:21','2023-08-14 12:13',65), (10,6,15,'2023-08-13 11:41','2023-08-13 12:41',66), (5,3,48,'2023-09-15 08:34','2023-09-15 09:47',54), (3,6,12,'2023-09-14 11:13','2023-09-14 12:09',40), (3,6,15,'2023-09-06 09:19','2023-09-06 10:22',58), (10,5,14,'2023-08-04 11:08','2023-08-04 12:18',60), (9,2,4,'2023-09-20 12:50','2023-09-20 13:44',41), (5,4,44,'2023-08-18 08:13','2023-08-18 09:20',43);